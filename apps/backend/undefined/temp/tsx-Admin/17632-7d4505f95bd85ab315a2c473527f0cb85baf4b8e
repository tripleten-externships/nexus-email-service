{"code":"__filename=\"C:\\\\Users\\\\Admin\\\\WebstormProjects\\\\nexus-email-service\\\\apps\\\\backend\\\\app\\\\app.ts\";(()=>{\n\"use strict\";var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf;var __hasOwnProp=Object.prototype.hasOwnProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true})};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from===\"object\"||typeof from===\"function\"){for(let key of __getOwnPropNames(from))if(!__hasOwnProp.call(to,key)&&key!==except)__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable})}return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,\"default\",{value:mod,enumerable:true}):target,mod));var __toCommonJS=mod=>__copyProps(__defProp({},\"__esModule\",{value:true}),mod);var app_exports={};__export(app_exports,{default:()=>app_default});module.exports=__toCommonJS(app_exports);var import_middleware=__toESM(require(\"aws-serverless-express/middleware\"));var import_cookie_parser=__toESM(require(\"cookie-parser\"));var import_cors=__toESM(require(\"cors\"));var import_dotenv=__toESM(require(\"dotenv\"));var import_express=__toESM(require(\"express\"));var import_path=__toESM(require(\"path\"));var import_sendGridHook=__toESM(require(\"./rest/routes/sendGridHook\"));var import_log=__toESM(require(\"../logging/log\"));import_dotenv.default.config();const inDevelopmentMode=process.env.DEPLOYMENT_ENV===\"local\";import_log.default.info(`NODE_ENV: ${process.env.NODE_ENV}`);import_log.default.info(`inDevelopmentMode: ${inDevelopmentMode}`);const app=(0,import_express.default)();app.disable(\"x-powered-by\");app.use(import_express.default.json({limit:\"6Mb\",verify:__name((req,res,buf)=>{req.rawBody=buf.toString()},\"verify\")}));app.use(import_express.default.urlencoded({extended:false}));app.use(import_express.default.static(import_path.default.join(__dirname,\"public\")));app.use(import_middleware.default.eventContext());const corsOptions={origin:true,methods:[\"GET\",\"PUT\",\"POST\",\"DELETE\"],preflightContinue:false,optionsSuccessStatus:200};app.use((0,import_cors.default)(corsOptions));app.use((0,import_cookie_parser.default)());app.use(async(req,res,next)=>{res.setHeader(\"Content-Type\",\"application/json\");res.locals.userAgent=\"user-agent\"in req.headers?req.headers[\"user-agent\"]:\"Unknown\";res.setHeader(\"X-XSS-Protection\",\"1\");res.setHeader(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains;\");res.setHeader(\"X-Content-Type-Options\",\"nosniff\");res.setHeader(\"Content-Security-Policy\",\"Include default-src 'self'\");res.setHeader(\"X-Download-Options\",\"noopen\");res.setHeader(\"Surrogate-Control\",\"no-store\");res.setHeader(\"Cache-Control\",\"no-store, no-cache, must-revalidate, proxy-revalidate\");res.setHeader(\"Pragma\",\"no-cache\");res.setHeader(\"Expires\",\"0\");res.setHeader(\"X-Permitted-Cross-Domain-Policies\",\"none\");next()});app.use(import_sendGridHook.default);app.get(\"/\",(req,res)=>{res.status(200).send(\"Hello World\")});app.use((err,req,res,next)=>{import_log.default.error(err);res.status(500).send(\"Internal Server Error\")});var app_default=app;\n})()\n","warnings":[],"map":{"version":3,"mappings":";8/BAAA,kIAA2C,sDAC3C,yBAAyB,kCACzB,gBAAiB,yBACjB,kBAAmB,2BACnB,mBAAoB,4BACpB,gBAAiB,yBAEjB,wBAAmB,+CAEnB,eAAgB,mCAEhB,cAAAA,QAAO,OAAO,EAEd,MAAM,kBAAoB,QAAQ,IAAI,iBAAmB,QACzD,WAAAC,QAAI,KAAK,aAAa,QAAQ,IAAI,QAAQ,EAAE,EAC5C,WAAAA,QAAI,KAAK,sBAAsB,iBAAiB,EAAE,EAElD,MAAM,OAAM,eAAAC,SAAQ,EACpB,IAAI,QAAQ,cAAc,EAE1B,IAAI,IACF,eAAAA,QAAQ,KAAK,CACX,MAAO,MACP,OAAQ,QAAC,IAAK,IAAK,MAAQ,CACxB,IAAY,QAAU,IAAI,SAAS,CACtC,EAFQ,SAGV,CAAC,CACH,EACA,IAAI,IAAI,eAAAA,QAAQ,WAAW,CAAE,SAAU,KAAM,CAAC,CAAC,EAC/C,IAAI,IAAI,eAAAA,QAAQ,OAAO,YAAAC,QAAK,KAAK,UAAW,QAAQ,CAAC,CAAC,EACtD,IAAI,IAAI,kBAAAC,QAA+B,aAAa,CAAC,EAErD,MAAM,YAAgC,CACpC,OAAQ,KACR,QAAS,CAAC,MAAO,MAAO,OAAQ,QAAQ,EACxC,kBAAmB,MACnB,qBAAsB,GACxB,EAEA,IAAI,OAAI,YAAAC,SAAK,WAAW,CAAC,EACzB,IAAI,OAAI,qBAAAC,SAAa,CAAC,EAEtB,IAAI,IAAI,MAAO,IAAK,IAAK,OAAS,CAChC,IAAI,UAAU,eAAgB,kBAAkB,EAChD,IAAI,OAAO,UAAY,eAAgB,IAAI,QAAU,IAAI,QAAQ,YAAY,EAAI,UAEjF,IAAI,UAAU,mBAAoB,GAAG,EACrC,IAAI,UAAU,4BAA6B,sCAAsC,EACjF,IAAI,UAAU,yBAA0B,SAAS,EACjD,IAAI,UAAU,0BAA2B,4BAA4B,EACrE,IAAI,UAAU,qBAAsB,QAAQ,EAG5C,IAAI,UAAU,oBAAqB,UAAU,EAC7C,IAAI,UAAU,gBAAiB,uDAAuD,EACtF,IAAI,UAAU,SAAU,UAAU,EAClC,IAAI,UAAU,UAAW,GAAG,EAC5B,IAAI,UAAU,oCAAqC,MAAM,EACzD,KAAK,CACP,CAAC,EAED,IAAI,IAAI,oBAAAC,OAAM,EAEd,IAAI,IAAI,IAAK,CAAC,IAAK,MAAQ,CACzB,IAAI,OAAO,GAAG,EAAE,KAAK,aAAa,CACpC,CAAC,EAED,IAAI,IAAI,CAAC,IAAK,IAAK,IAAK,OAAS,CAC/B,WAAAN,QAAI,MAAM,GAAG,EACb,IAAI,OAAO,GAAG,EAAE,KAAK,uBAAuB,CAC9C,CAAC,EAED,IAAO,YAAQ","names":["dotenv","log","express","path","awsServerlessExpressMiddleware","cors","cookieParser","router"],"ignoreList":[],"sources":["C:\\Users\\Admin\\WebstormProjects\\nexus-email-service\\apps\\backend\\app\\app.ts"],"sourcesContent":[null]}}